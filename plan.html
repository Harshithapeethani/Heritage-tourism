<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Trip Planner â€“ Heritage Tourism</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
  font-family: 'Poppins', sans-serif;
  background: linear-gradient(135deg,#e3f2fd,#f9fbe7);
  overflow-x:hidden;
}
.emoji{
  position:absolute;
  font-size:22px;
  animation: float 6s infinite ease-in-out;
}
@keyframes float{
  0%{transform:translateY(0)}
  50%{transform:translateY(-20px)}
  100%{transform:translateY(0)}
}
.glass-card{
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(12px);
  border-radius: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.15);
  padding: 30px;
}
button{
  transition: all 0.3s ease;
}
button:hover{
  transform: scale(1.05);
}
</style>
</head>

<body>

<div class="emoji" style="top:10%;left:5%">ğŸ¥°</div>
<div class="emoji" style="top:30%;right:8%">ğŸŒˆğŸ­</div>
<div class="emoji" style="bottom:20%;left:10%">ğŸ’</div>
<div class="emoji" style="bottom:15%;right:12%">ğŸª†ğŸ€ğŸª„</div>

<div class="container my-5">
  <h1 class="text-center fw-bold mb-4">ğŸ§­ Trip Planner & Budget Estimator</h1>

  <div class="glass-card mx-auto" style="max-width:600px">
    <div class="mb-3">
      <label class="form-label">ğŸŒ Select State</label>
      <select class="form-select" id="state"></select>
    </div>

    <div class="mb-3">
      <label class="form-label">ğŸ“ Select Place</label>
      <select class="form-select" id="place"></select>
    </div>

    <div class="mb-3">
      <label class="form-label">ğŸ—“ï¸ Number of Days</label>
      <input type="number" id="days" class="form-control" value="2" min="1">
    </div>

    <p class="text-muted mt-2" id="preview"></p>

    <button class="btn btn-success w-100 fw-bold" onclick="generatePlan()">
      ğŸš€ Generate Trip Plan & Budget
    </button>
  </div>

  <div class="glass-card mt-5 d-none" id="summary">
    <h3 class="mb-3">ğŸ“Œ Trip Summary</h3>
    <p id="summaryText"></p>
    <h4 class="text-success" id="budget"></h4>
  </div>
</div>

<script src="data.js"></script>

<script>
const stateSelect = document.getElementById("state");
const placeSelect = document.getElementById("place");

// 1) Load states
function loadStates() {
  stateSelect.innerHTML = "";
  Object.keys(STATE_DATA).forEach(st => {
    const opt = document.createElement("option");
    opt.value = st;
    opt.textContent = st.charAt(0).toUpperCase() + st.slice(1);
    stateSelect.appendChild(opt);
  });
}

// 2) Load places
function loadPlaces() {
  placeSelect.innerHTML = "";
  const state = stateSelect.value;
  if (!STATE_DATA[state]) return;

  Object.keys(STATE_DATA[state].places).forEach(pl => {
    const opt = document.createElement("option");
    opt.value = pl;
    opt.textContent = pl;
    placeSelect.appendChild(opt);
  });

  placeSelect.selectedIndex = 0;
  updatePreview(); // âœ… FIX
}

function updatePreview() {
  const state = stateSelect.value;
  const place = placeSelect.value;
  if (!STATE_DATA[state] || !STATE_DATA[state].places[place]) return;

  const d = STATE_DATA[state].places[place];
  const daily = d.hotelCost + d.guideCost + d.foodCost + d.localTravel;
  document.getElementById("preview").innerHTML =
    `ğŸ’¡ Estimated daily cost: â‚¹${daily}`;
}

// INITIAL LOAD  âœ… FIX
loadStates();
loadPlaces();

// EVENTS  âœ… FIX
stateSelect.addEventListener("change", loadPlaces);
placeSelect.addEventListener("change", updatePreview);

function capitalizeFirst(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

// 3) Generate plan
function generatePlan() {
  const state = stateSelect.value;
  const place = placeSelect.value;
  const days = parseInt(document.getElementById("days").value);

  if (!STATE_DATA[state] || !STATE_DATA[state].places[place]) {
    alert("Invalid selection");
    return;
  }

  const data = STATE_DATA[state].places[place];
  const dayTotal = data.hotelCost + data.guideCost + data.foodCost + data.localTravel;
  const total = dayTotal * days;

  document.getElementById("summaryText").innerHTML =
    `âœ¨ You are planning a <b>${days}-day</b> trip to <b>${place}</b> in <b>${capitalizeFirst(state)}</b>.<br>
     Hotel: â‚¹${data.hotelCost}/day<br>
     Guide: â‚¹${data.guideCost}/day<br>
     Food: â‚¹${data.foodCost}/day<br>
     Local Travel: â‚¹${data.localTravel}/day`;

  document.getElementById("budget").innerHTML =
    `ğŸ’° Total Estimated Budget: â‚¹${total}`;

  document.getElementById("summary").classList.remove("d-none");
}
</script>
<!-- ================= PREMIUM SMART AI PANEL ================= -->

<style>
.ai-float-btn{
  position:fixed;
  right:0;
  top:50%;
  transform:translateY(-50%);
  background:linear-gradient(135deg,#ff8c00,#ff3d00);
  color:white;
  padding:14px 10px;
  border-radius:12px 0 0 12px;
  writing-mode:vertical-rl;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 12px 30px rgba(0,0,0,0.3);
  z-index:999;
}

.ai-panel{
  position:fixed;
  right:-420px;
  top:0;
  width:400px;
  height:100vh;
  background:white;
  box-shadow:-15px 0 50px rgba(0,0,0,0.25);
  padding:25px;
  transition:0.4s ease;
  z-index:1000;
  overflow-y:auto;
}

.ai-panel.active{
  right:0;
}

.panel-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.close-btn{
  cursor:pointer;
  font-size:18px;
}

.section-title{
  font-weight:700;
  margin-top:18px;
  margin-bottom:8px;
}

.info-box{
  background:#f4f6f8;
  padding:12px;
  border-radius:10px;
  margin-bottom:10px;
  font-size:14px;
}

/* Toggle Switch */
.switch{
  position:relative;
  display:inline-block;
  width:45px;
  height:24px;
}

.switch input{
  opacity:0;
  width:0;
  height:0;
}

.slider{
  position:absolute;
  cursor:pointer;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background:#ccc;
  transition:.4s;
  border-radius:34px;
}

.slider:before{
  position:absolute;
  content:"";
  height:18px;
  width:18px;
  left:3px;
  bottom:3px;
  background:white;
  transition:.4s;
  border-radius:50%;
}

input:checked + .slider{
  background:#ff8c00;
}

input:checked + .slider:before{
  transform:translateX(21px);
}

.toggle-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:15px 0;
}

.apply-btn{
  width:100%;
  margin-top:15px;
}
</style>

<div class="ai-float-btn" onclick="openAIPlanner()">
âš¡ 1 DAY AI
</div>

<div class="ai-panel" id="aiPanel">

<div class="panel-header">
<h5>ğŸ¤– Smart 1-Day Plan</h5>
<span class="close-btn" onclick="closeAIPlanner()">âœ–</span>
</div>

<hr>

<div class="toggle-row">
<span>ğŸ‘¤ Solo Traveler Mode</span>
<label class="switch">
  <input type="checkbox" id="soloToggle">
  <span class="slider"></span>
</label>
</div>

<div id="aiContent"></div>

<button class="btn btn-success apply-btn" onclick="applyAIPlan()">
âœ… Apply Plan
</button>

</div>

<script>

function openAIPlanner(){
  document.getElementById("aiPanel").classList.add("active");
  generateAIPlan();
}

function closeAIPlanner(){
  document.getElementById("aiPanel").classList.remove("active");
}

function generateAIPlan(){

  const solo = document.getElementById("soloToggle").checked;

  /* ğŸ”´ If Women Safety Mode ON â†’ Redirect */
  if(solo){
    window.location.href = "women-safety.html";
    return;   // stop execution
  }

  /* Normal 1-Day AI Logic Below */
  document.getElementById("days").value = 1;

  const place = document.getElementById("place").value;
  const state = document.getElementById("state").value;

  const crowd = ["ğŸŸ¢ Low","ğŸŸ¡ Moderate","ğŸ”´ High"][Math.floor(Math.random()*3)];
  const weather = 30 + Math.floor(Math.random()*6);

  let html = `
  <div class="section-title">ğŸ“ Location</div>
  <div class="info-box">${place}, ${state}</div>

  <div class="section-title">ğŸ›¡ Crowd Level</div>
  <div class="info-box">${crowd}</div>

  <div class="section-title">ğŸŒ¦ Weather</div>
  <div class="info-box">${weather}Â°C â€“ Carry water</div>

  <div class="section-title">ğŸ•’ 1-Day Itinerary</div>
  <div class="info-box">
  ğŸŒ… Morning â€“ Explore monument<br>
  ğŸ½ Afternoon â€“ Local food<br>
  ğŸŒ‡ Evening â€“ Cultural walk & photos
  </div>

  <div class="section-title">ğŸ’› Travel Note</div>
  <div class="info-box">
  Make memories, not excuses.
  </div>
  `;

  document.getElementById("aiContent").innerHTML = html;
}
function applyAIPlan(){

  const solo=document.getElementById("soloToggle").checked;

  document.getElementById("summaryText").innerHTML=
  solo ?
  "ğŸ‘¤ Solo 1-Day Plan Applied." :
  "âš¡ Smart 1-Day Plan Applied.";

  document.getElementById("budget").innerHTML=
  "ğŸ’° Budget calculated in AI panel.";

  document.getElementById("summary").classList.remove("d-none");

  closeAIPlanner();
}

document.addEventListener("DOMContentLoaded",function(){
  document.getElementById("soloToggle").addEventListener("change",generateAIPlan);
});

</script>
</body>
</html>